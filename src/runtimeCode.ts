// THIS FILE IS AUTO CREATED BY build.mjs
export const runtimeCode = `"use strict";var RUNTIME=(()=>{var d=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var I=(i,t)=>{for(var r in t)d(i,r,{get:t[r],enumerable:!0})},N=(i,t,r,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of h(t))!f.call(i,a)&&a!==r&&d(i,a,{get:()=>t[a],enumerable:!(e=l(t,a))||e.enumerable});return i};var b=i=>N(d({},"__esModule",{value:!0}),i);var p={};I(p,{Ratio:()=>o,SExpr:()=>n,SExprType:()=>m});var m=(c=>(c.CONS="CONS",c.NIL="NIL",c.INT="INT",c.RATIO="RATIO",c.FLOAT="FLOAT",c.ID="ID",c.CHAR="CHAR",c.STR="STR",c.T="T",c.DEFUN="DEFUN",c.GLOBAL="GLOBAL",c))(m||{});function R(i,t){for(;t!=0;){let r=t;t=i%t,i=r}return i}var o=class{constructor(t,r){this.numerator=t,this.denominator=r,this.reduce()}clone(){return new o(this.numerator,this.denominator)}reduce(){let t=R(this.numerator,this.denominator);this.numerator/=t,this.denominator/=t}compare(t){let r=this.clone();r.reduce();let e=t.clone();return e.reduce(),r.numerator==e.numerator&&r.denominator==e.denominator}static fromNumber(t){return new o(t,1)}static add(t,r){let e=new o(t.numerator*r.denominator+r.numerator*t.denominator,t.denominator*r.denominator);return e.reduce(),e}static sub(t,r){let e=new o(t.numerator*r.denominator-r.numerator*t.denominator,t.denominator*r.denominator);return e.reduce(),e}static mul(t,r){let e=new o(t.numerator*r.numerator,t.denominator*r.denominator);return e.reduce(),e}static div(t,r){let e=new o(t.numerator*r.denominator,t.denominator*r.numerator);return e.reduce(),e}toFloat(){return this.numerator/this.denominator}toString(){return""+this.numerator+"/"+this.denominator}};var n=class{constructor(t,r=-1,e=-1){this.car=null;this.cdr=null;this.srcRow=-1;this.srcCol=-1;this.type=t,this.srcRow=r,this.srcCol=e}set(t){this.type=t.type,this.data=t.data,this.car=t.car,this.cdr=t.cdr,this.srcRow=t.srcRow,this.srcCol=t.srcCol}static cons(t,r,e=-1,a=-1){let s=new n("CONS",e,a);return s.car=t,s.cdr=r,s.data=null,s}static defun(t,r,e=-1,a=-1){let s=new n("DEFUN",e,a);return s.car=n.atomID(t),s.cdr=r,s}static global(t,r=-1,e=-1){let a=new n("GLOBAL",r,e);return a.data=t,a}static atomNIL(t=-1,r=-1){return new n("NIL",t,r)}static atomINT(t,r=-1,e=-1){let a=new n("INT",r,e);return a.data=t,a}static atomRATIO(t,r,e=-1,a=-1){let s=new n("RATIO",e,a);return s.data=new o(t,r),s}static atomFLOAT(t,r=-1,e=-1){let a=new n("FLOAT",r,e);return a.data=t,a}static atomID(t,r=-1,e=-1){let a=new n("ID",r,e);return a.data=t,a}static atomCHAR(t,r=-1,e=-1){let a=new n("CHAR",r,e);return a.data=t,a}static atomSTRING(t,r=-1,e=-1){let a=new n("STR",r,e);return a.data=t,a}static atomT(t=-1,r=-1){return new n("T",t,r)}static len(t){let r=0;for(;t.type!=="NIL";)t=t.cdr,r++;return r}static nthcdr(t,r){let e=0;for(;t.type!=="NIL";){if(e==r)return t;t=t.cdr,e++}return n.atomNIL()}static nth(t,r){let e=0;for(;t.type!=="NIL";){if(e==r)return t.car;t=t.cdr,e++}return n.atomNIL()}static deepNth(t,r){let e=n.atomNIL();for(let a=0;a<r.length&&t.type!=="NIL";a++)e=t=n.nth(t,r[a]);return e}static equalp(t,r){if(t.type!==r.type)return!1;switch(t.type){case"T":case"NIL":return!0;case"CONS":if(n.equalp(t.car,r.car)==!1||n.equalp(t.cdr,r.cdr)==!1)return!1;break;case"INT":if(t.data!==r.data)return!1;break;case"FLOAT":let e=t.data,a=r.data;if(Math.abs(e-a)>1e-12)return!1;break;case"RATIO":if(t.data.compare(r.data)==!1)return!1;break;case"ID":case"CHAR":case"STR":if(t.data!==r.data)return!1;break;default:throw new Error("unimplemented SExpr.equalp(..) type "+t.type)}return!0}static match(t,r,e){if(t.type==="ID"){let a=t.data;if(a.startsWith("$")){let s=a.substring(1);if(s in e){if(n.equalp(e[s],r)==!1)return!1}else e[s]=r;return!0}}if(t.type==="CONS"&&t.car.type==="ID"){let a=t.car.data;if(a.startsWith("$$")){let s=a.substring(2);return s in e&&n.equalp(e[s],r)==!1?!1:(e[s]=r,!0)}}return t.type!==r.type?!1:t.type==="CONS"?n.match(t.car,r.car,e)&&n.match(t.cdr,r.cdr,e):t.data===r.data}remove(t){let r,e;r=n.atomNIL();let a=this,s=0;for(;a.type!=="NIL";){let u=a.car;u.type!=="CONS"&&u.type===t.type&&u.data===t.data||(s==0?r=e=n.cons(u,n.atomNIL()):(e.cdr=n.cons(u,n.atomNIL()),e=e.cdr)),a=a.cdr,s++}return r}static subst(t,r,e){return r.type==="CONS"?e:r.type===e.type&&r.data===e.data?t:e.type==="CONS"?n.cons(n.subst(t,r,e.car),n.subst(t,r,e.cdr)):e}toFloat(){switch(this.type){case"INT":case"FLOAT":return this.data;case"RATIO":return this.data.toFloat();default:return 0}}toCode(){switch(this.type){case"T":return"SExpr.atomT()";case"NIL":return"SExpr.atomNIL()";case"INT":case"FLOAT":return"SExpr.atomINT("+this.data+")";case"RATIO":return"SExpr.atomRATIO("+this.data.numerator+","+this.data.denominator+")";case"CONS":return"SExpr.cons("+this.car.toCode()+","+this.cdr.toCode()+")";default:throw Error("unimplemented SExpr.toCode() for type "+this.type)}}toString(t=!1,r=0){switch(this.type){case"NIL":return"NIL";case"T":return"T";case"INT":return""+this.data;case"FLOAT":return""+this.data;case"RATIO":return""+this.data.toString();case"ID":case"GLOBAL":return this.data;case"CHAR":return"#\\"+this.data;case"STR":return'"'+this.data+'"';case"DEFUN":return"FUNCTION "+this.car.data;case"CONS":let e="";if(t){e+="\n";for(let u=0;u<r*2;u++)e+=" ";r++}e+="(";let a=this,s=0;do{if(a.type==="NIL")break;if(s>0&&(e+=" "),a.type!="CONS"){e+=". "+a.toString(t,r);break}e+=a.car.toString(t,r),a=a.cdr,s++}while(a!=null);return e+=")",r--,e;default:throw new Error("unimplemented")}}};return b(p);})();
`;
